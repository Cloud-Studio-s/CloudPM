# v1.1.1 – Changelog

> Small API-focused release: more **helper methods** on join/login and item events.  
> All changes are additive and backwards-compatible.

---

## Highlights

- Added extra helpers to **item use / consume** events:
  - `PlayerItemUseEvent`
  - `PlayerItemConsumeEvent`
- Added extra helpers to **join / quit / login / pre-login** events:
  - `PlayerJoinEvent`, `PlayerQuitEvent`
  - `PlayerLoginEvent`, `PlayerPreLoginEvent`
- No behavior changes unless plugins use these new APIs.

---

## Added

### Item Events

#### `PlayerItemUseEvent` helpers

**Namespace:** `pocketmine\event\player\PlayerItemUseEvent`

New helper methods:

- `getDirectionX() : float`  
  Returns the X component of the direction vector.
- `getDirectionY() : float`  
  Returns the Y component of the direction vector.
- `getDirectionZ() : float`  
  Returns the Z component of the direction vector.
- `getItemName() : string`  
  Returns the display name of the used item.
- `getItemStateId() : int`  
  Returns the item **state ID** (includes type/meta, can be used as an identifier for this exact item form).

**Usage idea:**  
These helpers make it easier to:

- read the direction the player is aiming without manually unpacking the vector,
- identify the item used based on its name or state ID.

---

#### `PlayerItemConsumeEvent` helpers

**Namespace:** `pocketmine\event\player\PlayerItemConsumeEvent`

New helper methods:

- `getItemName() : string`  
  Returns the display name of the consumed item.
- `getItemStateId() : int`  
  Returns the state ID of the consumed item.
- `getItemCount() : int`  
  Returns how many items were in the stack when the event fired.
- `isConsumableItem() : bool`  
  Returns `true` if the item is a `ConsumableItem` (food, potions, etc.).

**Usage idea:**  
Useful for:

- tracking which consumables are used most (by name or state ID),
- making logic conditional on stack size or whether the item is a true consumable.

---

### Join / Quit / Login Events

#### `PlayerJoinEvent` helpers

**Namespace:** `pocketmine\event\player\PlayerJoinEvent`

New helper methods:

- `hasJoinMessage() : bool`  
  Returns `true` if the join message is non-empty.
- `clearJoinMessage() : void`  
  Clears the join message (no message will be broadcast unless changed later).
- `getFormattedJoinMessage() : string`  
  Returns the join message translated to the server language as a plain string.

**Usage idea:**  
Quickly check/clear join messages and log or reuse them in a formatted way.

---

#### `PlayerQuitEvent` helpers

**Namespace:** `pocketmine\event\player\PlayerQuitEvent`

New helper methods:

- `hasQuitMessage() : bool`  
  Returns `true` if the quit message is non-empty.
- `clearQuitMessage() : void`  
  Clears the quit message (no leave message broadcast).
- `getFormattedQuitMessage() : string`  
  Returns the quit message translated to the server language as a string.
- `getFormattedQuitReason() : string`  
  Returns the quit reason translated to the server language as a string.

**Usage idea:**  
Makes it easy to:

- suppress quit messages in certain worlds or modes,
- log human-readable quit reasons in your own logs.

---

### Login / Pre-Login Events

#### `PlayerLoginEvent` helpers

**Namespace:** `pocketmine\event\player\PlayerLoginEvent`

New helper methods:

- `hasKickMessage() : bool`  
  Returns `true` if a non-empty kick message is set.
- `clearKickMessage() : void`  
  Clears the kick message.
- `getFormattedKickMessage() : string`  
  Returns the kick message translated to the server language.
- `deny(Translatable|string $kickMessage) : void`  
  Convenience: set a kick message and cancel the event in one call.

**Usage idea:**  
Simplifies login-denial logic:

- `deny("You are not allowed to join right now");`
- or check if anything has already set a message with `hasKickMessage()`.

---

#### `PlayerPreLoginEvent` helpers

**Namespace:** `pocketmine\event\player\PlayerPreLoginEvent`

New helper methods:

- `isKicked() : bool`  
  Alias for `!isAllowed()` – returns `true` if any kick flag is set.
- `kickAsPlugin(Translatable|string $reason, Translatable|string|null $screenMessage = null) : void`  
  Sets `KICK_FLAG_PLUGIN` with a reason and optional screen message.
- `kickServerFull(Translatable|string $reason, Translatable|string|null $screenMessage = null) : void`  
  Sets `KICK_FLAG_SERVER_FULL`.
- `kickWhitelisted(Translatable|string $reason, Translatable|string|null $screenMessage = null) : void`  
  Sets `KICK_FLAG_SERVER_WHITELISTED`.
- `kickBanned(Translatable|string $reason, Translatable|string|null $screenMessage = null) : void`  
  Sets `KICK_FLAG_BANNED`.
- `isBanned() : bool`  
  Returns `true` if `KICK_FLAG_BANNED` is set.
- `isServerFullKick() : bool`  
  Returns `true` if `KICK_FLAG_SERVER_FULL` is set.
- `isWhitelistKick() : bool`  
  Returns `true` if `KICK_FLAG_SERVER_WHITELISTED` is set.

**Usage idea:**  
Cleaner, more readable pre-login code:

- `kickAsPlugin()` for custom logic,
- `isBanned()` / `isServerFullKick()` to inspect the result of other checks,
- `isKicked()` to know if something has already decided to deny the player.

---

## Changed

- No internal behavior was changed.
- Only **new helper methods** were added to:
  - `PlayerItemUseEvent`
  - `PlayerItemConsumeEvent`
  - `PlayerJoinEvent`
  - `PlayerQuitEvent`
  - `PlayerLoginEvent`
  - `PlayerPreLoginEvent`

---

## Compatibility

- No existing methods or events were removed or renamed.
- All changes are strictly **additive** and backwards-compatible.
- Plugins written for PocketMine-MP 5 should continue to work as before.
- Plugins can opt-in to CloudPM’s richer login/join/item APIs by using the new helpers documented above.
